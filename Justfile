# Lists all targets
[private]
default:
  @just --list

# Test dotslash feature with automated test located at devcontainer-features/test/dotslash/test.sh.
[group('Development Container Feature')]
test-feature-autogenerated:
  #!/usr/bin/env bash
  set -euo pipefail

  base_images=(
    debian:latest
    mcr.microsoft.com/devcontainers/base:ubuntu
    ubuntu:latest
  )

  for base_image in ${base_images[@]}; do
    devcontainer features test \
      --base-image debian:latest \
      --features dotslash \
      --project-folder devcontainer-features \
      --skip-scenarios
  done

# Test dotslash feature with scenarios defined in devcontainer-features/test/dotslash/scenarios.json.
[group('Development Container Feature')]
test-feature-scenarios:
  #!/usr/bin/env bash
  set -euo pipefail

  devcontainer features test \
    --features dotslash \
    --project-folder devcontainer-features \
    --skip-autogenerated \
    --skip-duplicated
